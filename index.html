<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=1">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title>Systems Finder</title>
    <link rel="stylesheet" href="loading.css">
</head>
<body>
    <div class="loading-area">
        <span><a id="textLoad" class="loader glow" href="http://192.168.21.221/MobApp/index.html" onclick="window.location.replace('http://192.168.21.221/MobApp/index.html');" style="text-decoration:none">Loading...</a></span>
        <span class="load_anim1"><a href="http://192.168.21.221/MobApp/index.html" onclick="window.location.replace('http://192.168.21.221/MobApp/index.html');" style="text-decoration:none"></a></span>
        <span class="load_anim2"><a href="http://192.168.21.221/MobApp/index.html" onclick="window.location.replace('http://192.168.21.221/MobApp/index.html');" style="text-decoration:none"></a></span>
    </div>
    <script type="text/javascript">
        fetch('https://raw.githubusercontent.com/SystemsMonitor/MobApp/main/update.json', {cache:"no-cache"})
            .then(response => response.json())
            .then(data => {
            url = `${data.http}`;
            document.getElementById("textLoad").innerHTML = `${data.time_and_date}`;
        });
        
        var url = '';

        function update() {
            fetch('https://raw.githubusercontent.com/SystemsMonitor/MobApp/main/update.json', {cache:"no-cache"})
                .then(response => response.json())
                .then(data => {
                    url = `${data.http}`;
                    console.log(data);
                    console.log(url);
                    if(document.getElementById("textLoad").innerHTML == "Loading..."){
                        console.log("=loading...");
                        document.getElementById("textLoad").innerHTML = `${data.time_and_date}`;
                    }
                    else if(document.getElementById("textLoad").innerHTML != "Loading..."){
                        console.log("!=loading...");
                        document.getElementById("textLoad").innerHTML = "Loading...";
                    }
                    //----added cotunnel
                    document.getElementById("textLoad").innerHTML = "Redirect...";
                    window.location.replace(url);

                    //-----
                });
        }

        var intervalId4 = window.setInterval(function(){
                update();
            }, 4000);
       
    </script>
</body> 
</html>